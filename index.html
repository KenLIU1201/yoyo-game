<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>💕 抱抱安慰遊戲 💕</title>
<style>
    body { text-align: center; background: #ffe6f0; font-family: Arial, sans-serif; overflow-x: hidden; }
    h1 { color: #ff4d88; }
    #progress-container { width: 80%; margin: 20px auto; height: 30px; background: #ffd6e7; border-radius: 15px; overflow: hidden; }
    #progress-bar { height: 100%; width: 0%; background: linear-gradient(90deg, #ff4d88, #ff99bb); transition: width 0.5s ease, background 0.5s ease; }
    button { padding: 10px 20px; background: #ff4d88; color: white; border: none; border-radius: 20px; font-size: 18px; cursor: pointer; }
    button:hover { background: #ff1a66; }
    #gif-display img { max-width: 250px; margin: 15px; border-radius: 10px; }

    /* 對話框 */
    #dialog-box {
        display: none;
        position: fixed;
        top: 50%; left: 50%;
        transform: translate(-50%, -50%);
        background: #fff0f6;
        padding: 20px;
        border: 3px solid #ff4d88;
        border-radius: 20px;
        font-size: 18px;
        color: #ff4d88;
        box-shadow: 0 0 20px rgba(255,77,136,0.5);
        z-index: 999;
    }
    #dialog-box button {
        background: #ff4d88;
        color: white;
        border: none;
        border-radius: 15px;
        padding: 5px 15px;
        margin-top: 10px;
    }

    /* 愛心動畫 */
    .heart {
        position: absolute;
        color: #ff4d88;
        animation: floatUp linear forwards;
    }
    @keyframes floatUp {
        0% { transform: translateY(0) scale(1); opacity: 1; }
        100% { transform: translateY(-150px) scale(1.5); opacity: 0; }
    }

    /* 愛心爆炸 */
    .big-heart {
        position: fixed;
        top: 50%; left: 50%;
        transform: translate(-50%, -50%) scale(0);
        font-size: 100px;
        color: #ff4d88;
        animation: explode 1s ease-out forwards;
        z-index: 1000;
    }
    @keyframes explode {
        0% { transform: translate(-50%, -50%) scale(0); opacity: 1; }
        50% { transform: translate(-50%, -50%) scale(1.5); opacity: 1; }
        100% { transform: translate(-50%, -50%) scale(0); opacity: 0; }
    }
</style>
</head>
<body>
<h1>💕 讓yoyo開心小遊戲 💕</h1>

<div id="progress-container"><div id="progress-bar"></div></div>
<p id="message">點擊按鈕讓妳開心起來 💖</p>

<button onclick="hugAndHearts()">抱抱一下 🤗</button>
<div id="gif-display"></div>

<audio id="bgm" loop>
    <source src="bgm.mp3" type="audio/mpeg">
</audio>

<!-- 對話框 -->
<div id="dialog-box">
    <p id="dialog-text"></p>
    <button onclick="closeDialog()">好哦 💕</button>
</div>

<script>
    let mood = 0;
    let clickCount = 0;
    const messages = ["給妳一顆糖 🍬", "送妳一朵花 🌸", "抱抱 🤗", "親親 😘", "永遠愛妳 ❤️"];
    const gifs = [
        "images/test1.jpg",
        "images/test2.jpg",
        "images/test3.jpg",
        "https://media1.tenor.com/m/RI3SyWQeqS0AAAAd/bubu-dudu.gif",
        "https://media1.tenor.com/m/nMNJcKSAPvwAAAAC/love-you-forever.gif",
        "https://media1.tenor.com/m/P6FsFii7pnoAAAAd/hug-warm-hug.gif",
        "https://media.tenor.com/2pqrALDJCvEAAAAj/bubu-dudu-sseeyall.gif"
    ];
    let gifIndex = 0;

    function hugAndHearts() {
        const bgm = document.getElementById("bgm");
        if (bgm.paused) bgm.play();

        clickCount++;

        if (mood < 100) {
            mood += 20;
            document.getElementById("progress-bar").style.width = mood + "%";
            changeProgressColor(mood);
            document.getElementById("message").innerText = messages[mood / 20 - 1] + ` (心情值：${mood}%)`;
        } else {
            document.getElementById("message").innerText = "寶貝不要不開心了！ 💞";
            showBigHeart();
        }

        // **第 15 次觸發特殊視窗**
        if (clickCount === 15) {
            showDialog("按這麼多次就不能生氣氣了哦！ 😘");
        }

        // **彩蛋觸發條件**
        if (mood === 100 && clickCount > 20) {
            showDialog("🎉 彩蛋解鎖！LOVE YOU FOREVER 💖");
        }

        // 顯示 GIF
        const gifDiv = document.getElementById("gif-display");
        gifDiv.innerHTML = `<img src="${gifs[gifIndex]}" alt="抱抱">`;
        gifIndex = (gifIndex + 1) % gifs.length;
        setTimeout(() => { gifDiv.innerHTML = ""; }, 5000);

        manyHearts();
    }

    function manyHearts() {
        for (let i = 0; i < 50; i++) {
            const heart = document.createElement("div");
            heart.className = "heart";
            heart.innerText = "❤️";

            heart.style.left = Math.random() * window.innerWidth + "px";
            heart.style.top = window.innerHeight - 50 + "px";
            const size = 14 + Math.random() * 30;
            heart.style.fontSize = size + "px";

            const duration = 1.5 + Math.random() * 2;
            heart.style.animationDuration = duration + "s";

            document.body.appendChild(heart);
            setTimeout(() => heart.remove(), duration * 1000);
        }
    }

    function changeProgressColor(mood) {
        const bar = document.getElementById("progress-bar");
        if (mood >= 100) {
            bar.style.background = "linear-gradient(90deg, #ff99bb, #ff1a66)";
            bar.style.animation = "pulse 0.5s infinite alternate";
        } else if (mood >= 60) {
            bar.style.background = "linear-gradient(90deg, #ff4d88, #ff99bb)";
        }
    }

    function showBigHeart() {
        const bigHeart = document.createElement("div");
        bigHeart.className = "big-heart";
        bigHeart.innerText = "💖";
        document.body.appendChild(bigHeart);
        setTimeout(() => bigHeart.remove(), 1000);
    }

    function showDialog(text) {
        document.getElementById("dialog-text").innerText = text;
        document.getElementById("dialog-box").style.display = "block";
    }

    function closeDialog() {
        document.getElementById("dialog-box").style.display = "none";
    }
</script>
</body>
</html>
